<include file="Public:header" />
	<script type="text/javascript" src="../Public/js/tree.js"></script>	
<script type="text/javascript" src="../Public/js/js.js"></script>
		<script type="text/javascript">
		    function go(id, name) {
		       window.parent.talkOnclick(id,name);
		    }
			////////////////////////////////
$(document).ready(function() {
    //var val = $("#userSearch input").val(); 
    $("#userSearch input").keyup(function() {
        var val = $(this).val();
        var tree = $("#onlineTree");
        var box = $("#searchResult");
        if (val != "") {
            tree.hide();
            box.show();
            box.empty();
            var result = $(".sTreeNode:contains('" + $(this).val() + "')");
           result.each(function(i) {
                $(this).clone().appendTo(box);
            });
			$("#searchResult .oTree-bg").remove();
	        $("#searchResult img[src$='empty.gif']").remove();
        } else {
            tree.show();
            box.empty();
            box.hide();
        }



    });
});
		</script>
		
	<body>
	<div id="userSearch">
		<form action="">
			<input type="text" value="" />
		</form>
	</div>

		<div class="onlineTree" id="onlineTree">
	
 <script type="text/javascript">
			                <!--
				            var user = new sTree('user');
				            user.icon = {
				                root: '../Public/img/empty.gif',
				                folder: '../Public/img/folder.gif',
				                folderOpen: '../Public/img/folderopen.gif',
				                node: '../images/bg_4x7.gif',
				                empty: '../Public/img/empty.gif',
				                line: '../Public/img/line.gif',
				                join: '../Public/img/join.gif',
				                joinBottom: '../Public/img/joinbottom.gif',
				                plus: '../Public/img/plus.gif',
				                plusBottom: '../Public/img/plusbottom.gif',
				                minus: '../Public/img/minus.gif',
				                minusBottom: '../Public/img/minusbottom.gif',
				                nlPlus: '../Public/img/nolines_plus.gif',
				                nlMinus: '../Public/img/nolines_minus.gif'
				            };
				            // id, pid, name, url, title, target, icon, iconOpen, open, cls
				            user.add(0, -1, '金凯通达', '', '', '', '../Public/images/ico/company-ico.gif', '../Public/images/ico/company-ico.gif', '', 'tree-root');
			 
				            user.add('admin',0,'系统管理员','javascript:go(\'admin\',\'系统管理员\')','','','../Public/images/ico/user1.gif','','','');
			 	            
			<volist name="deptuserlist" id="vo" key="k">
			    user.add({$vo[DEPT_ID]},{$vo[DEPT_PARENT]},'[{$vo.DEPT_NAME}]','javascript:;','','','../Public/images/treeicon/t_ini.gif','../Public/images/treeicon/t_ini.gif','','oTree-bg');
			    <sublist name="vo[user]" id="user">
			      user.add('{$user[USER_ID]}',{$vo[DEPT_ID]},'{$user.USER_NAME}','javascript:go({$user[USER_ID]|addDyh},{$user[USER_NAME]|addDyh});','','','{$user[USER_ID]|getOnlineStatusImg}','','','',{$user[UserState]|json_encode});
			    </sublist>
			</volist>
                     
				            document.write(user);
			                //-->
		                </script>
		                
		</div>
		<div id="searchResult">	</div>
<include file="Public:footer" />

